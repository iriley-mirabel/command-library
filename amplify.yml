version: 1
frontend:
  phases:
    preBuild:
      commands:
        # Copy command files to web portal public directory
        - echo "Copying command files to web portal..."
        - mkdir -p app/web-portal/public/commands
        - cp .cursor/commands/*.md app/web-portal/public/commands/ || true
        - cp library/commands-index.json app/web-portal/public/commands/index.json || true
        - cd app/web-portal
        - npm ci
    build:
      commands:
        - cd app/web-portal
        - npm run build
  artifacts:
    baseDirectory: app/web-portal/dist
    files:
      - '**/*'
  cache:
    paths:
      - app/web-portal/node_modules/**/*
